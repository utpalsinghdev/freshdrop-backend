generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Otp {
  id        Int      @id @default(autoincrement())
  number    String   @unique
  otp       String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model User {
  id          Int      @id @default(autoincrement())
  name        String   @default("customer")
  number      String   @unique
  orders      Order[]  @relation("userOrders")
  bottles     Int?
  balance     Int      @default(0)
  address     String?
  membership Json?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

enum OrderType {
  SINGLE
  MEMBERSHIPED
}

enum TimeSlot {
  MORNING
  AFTERNOON
  EVENING
}

enum EmployeeRole {
  DELIVERY
  ADMIN
  SUPERADMIN
}

model Employee {
  Employee_id Int          @id @default(autoincrement())
  name        String
  number      String       @unique
  role        EmployeeRole
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  orders      Order[]      @relation("employeeOrders")
}

model Order {
  Order_id     Int       @id @default(autoincrement())
  number       String
  address      String
  deliveryDate DateTime
  quantity     Int
  deliveryTime TimeSlot
  type         OrderType @default(SINGLE)
  status       String    @default("pending")
  user         User      @relation("userOrders", fields: [userId], references: [id])
  userId       Int
  AuthorBy     Employee? @relation("employeeOrders", fields: [AuthorBy_id], references: [Employee_id])
  AuthorBy_id  Int?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}
